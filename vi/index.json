[{"uri":"https://thienluhoan.github.io/workshop-template/vi/","title":"ThÃ´ng tin cÃ¡ nhÃ¢n","tags":[],"description":"","content":"ThÃ´ng tin cÃ¡ nhÃ¢n: Há» vÃ  tÃªn: Nguyá»…n ThÃ nh NguyÃªn\nSá»‘ Ä‘iá»‡n thoáº¡i: 0935457152\nEmail: nguyen.fridayed@gmail.com\nTrÆ°á»ng Ä‘áº¡i há»c: FPT University\nChuyÃªn ngÃ nh: Information Assurance\nNá»™i dung ECS-Fargate-Microservices "},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/","title":"ECS Fargate Microservices","tags":[],"description":"","content":"Dá»± Ã¡n nÃ y triá»ƒn khai má»™t ná»n táº£ng triá»ƒn khai microservices tá»± Ä‘á»™ng vÃ  báº£o máº­t hoÃ n toÃ n trÃªn AWS, sá»­ dá»¥ng ECS Fargate lÃ m cÃ´ng cá»¥ Ä‘iá»u phá»‘i container vÃ  Terraform lÃ m cÃ´ng cá»¥ Infrastructure-as-Code (IaC). Má»¥c tiÃªu lÃ  xÃ¢y dá»±ng má»™t kiáº¿n trÃºc sáºµn sÃ ng cho production cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng, tá»‘i Æ°u chi phÃ­ vÃ  báº£o máº­t cao, Ä‘á»“ng thá»i cho phÃ©p phÃ¢n phá»‘i á»©ng dá»¥ng nhanh chÃ³ng vÃ  Ä‘Ã¡ng tin cáº­y thÃ´ng qua pipeline CI/CD hoÃ n chá»‰nh.\nTrung tÃ¢m cá»§a há»‡ thá»‘ng lÃ  dá»‹ch vá»¥ ECS Fargate cháº¡y cÃ¡c microservices Ä‘Æ°á»£c container hÃ³a. Táº¥t cáº£ cÃ¡c thÃ nh pháº§n háº¡ táº§ng AWSâ€”bao gá»“m máº¡ng, báº£o máº­t, tÃ­nh toÃ¡n, lÆ°u trá»¯ vÃ  giÃ¡m sÃ¡tâ€”Ä‘Æ°á»£c cung cáº¥p thÃ´ng qua cÃ¡c module Terraform. Dá»± Ã¡n tÃ­ch há»£p AWS CodeBuild vÃ  AWS CodePipeline, cho phÃ©p cÃ¡c báº£n cáº­p nháº­t á»©ng dá»¥ng Ä‘Æ°á»£c tá»± Ä‘á»™ng build, container hÃ³a, Ä‘áº©y lÃªn Amazon ECR, vÃ  triá»ƒn khai lÃªn ECS báº¥t cá»© khi nÃ o cÃ³ code má»›i Ä‘Æ°á»£c push lÃªn GitHub.\nÄá»ƒ cÃ¢n báº±ng giá»¯a báº£o máº­t vÃ  chi phÃ­, há»‡ thá»‘ng hoáº¡t Ä‘á»™ng trong private subnets khÃ´ng cÃ³ NAT Gateway. Thay vÃ o Ä‘Ã³, nÃ³ sá»­ dá»¥ng má»™t táº­p há»£p cÃ¡c VPC Interface Endpoints (ECR, S3, Secrets Manager, CloudWatch, v.v.) Ä‘á»ƒ cho phÃ©p cÃ¡c ECS tasks kÃ©o images má»™t cÃ¡ch báº£o máº­t vÃ  truy cáº­p cÃ¡c dá»‹ch vá»¥ AWS cáº§n thiáº¿t mÃ  khÃ´ng cáº§n phÆ¡i bÃ y tÃ i nguyÃªn ra internet cÃ´ng cá»™ng.\nBáº£o máº­t Ä‘Æ°á»£c tÄƒng cÆ°á»ng á»Ÿ nhiá»u lá»›p:\nAWS WAF báº£o vá»‡ Application Load Balancer (ALB) khá»i cÃ¡c cuá»™c táº¥n cÃ´ng web phá»• biáº¿n.\nAmazon GuardDuty, VPC Flow Logs, vÃ  CloudWatch cung cáº¥p phÃ¡t hiá»‡n má»‘i Ä‘e dá»a liÃªn tá»¥c vÃ  kháº£ nÄƒng quan sÃ¡t.\nSecrets Manager Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u cÆ¡ sá»Ÿ dá»¯ liá»‡u.\nRoute 53 cung cáº¥p quáº£n lÃ½ domain tÃ¹y chá»‰nh vÃ  Ä‘á»‹nh tuyáº¿n DNS.\nDá»± Ã¡n nÃ y thá»ƒ hiá»‡n má»™t cÃ¡ch tiáº¿p cáº­n hiá»‡n Ä‘áº¡i, cloud-native vÃ  phÃ¹ há»£p vá»›i production Ä‘á»ƒ cháº¡y microservices trÃªn AWSâ€”káº¿t há»£p tá»± Ä‘á»™ng hÃ³a, kháº£ nÄƒng quan sÃ¡t, tÃ­nh kháº£ dá»¥ng cao vÃ  cÃ¡c thá»±c hÃ nh báº£o máº­t máº¡nh máº½.\nÄÃ¢y lÃ  kiáº¿n trÃºc cá»§a dá»± Ã¡n:\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.1-introduction/","title":"Giá»›i thiá»‡u","tags":[],"description":"","content":"Dá»± Ã¡n nÃ y triá»ƒn khai má»™t ná»n táº£ng triá»ƒn khai microservices tá»± Ä‘á»™ng vÃ  báº£o máº­t hoÃ n toÃ n trÃªn AWS, sá»­ dá»¥ng ECS Fargate lÃ m cÃ´ng cá»¥ Ä‘iá»u phá»‘i container vÃ  Terraform lÃ m cÃ´ng cá»¥ Infrastructure-as-Code (IaC). Má»¥c tiÃªu lÃ  xÃ¢y dá»±ng má»™t kiáº¿n trÃºc sáºµn sÃ ng cho production cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng, tá»‘i Æ°u chi phÃ­ vÃ  báº£o máº­t cao, Ä‘á»“ng thá»i cho phÃ©p phÃ¢n phá»‘i á»©ng dá»¥ng nhanh chÃ³ng vÃ  Ä‘Ã¡ng tin cáº­y thÃ´ng qua pipeline CI/CD hoÃ n chá»‰nh.\nTrung tÃ¢m cá»§a há»‡ thá»‘ng lÃ  dá»‹ch vá»¥ ECS Fargate cháº¡y cÃ¡c microservices Ä‘Æ°á»£c container hÃ³a. Táº¥t cáº£ cÃ¡c thÃ nh pháº§n háº¡ táº§ng AWSâ€”bao gá»“m máº¡ng, báº£o máº­t, tÃ­nh toÃ¡n, lÆ°u trá»¯ vÃ  giÃ¡m sÃ¡tâ€”Ä‘Æ°á»£c cung cáº¥p thÃ´ng qua cÃ¡c module Terraform. Dá»± Ã¡n tÃ­ch há»£p AWS CodeBuild vÃ  AWS CodePipeline, cho phÃ©p cÃ¡c báº£n cáº­p nháº­t á»©ng dá»¥ng Ä‘Æ°á»£c tá»± Ä‘á»™ng build, container hÃ³a, Ä‘áº©y lÃªn Amazon ECR, vÃ  triá»ƒn khai lÃªn ECS báº¥t cá»© khi nÃ o cÃ³ code má»›i Ä‘Æ°á»£c push lÃªn GitHub.\nÄá»ƒ cÃ¢n báº±ng giá»¯a báº£o máº­t vÃ  chi phÃ­, há»‡ thá»‘ng hoáº¡t Ä‘á»™ng trong private subnets khÃ´ng cÃ³ NAT Gateway. Thay vÃ o Ä‘Ã³, nÃ³ sá»­ dá»¥ng má»™t táº­p há»£p cÃ¡c VPC Interface Endpoints (ECR, S3, Secrets Manager, CloudWatch, v.v.) Ä‘á»ƒ cho phÃ©p cÃ¡c ECS tasks kÃ©o images má»™t cÃ¡ch báº£o máº­t vÃ  truy cáº­p cÃ¡c dá»‹ch vá»¥ AWS cáº§n thiáº¿t mÃ  khÃ´ng cáº§n phÆ¡i bÃ y tÃ i nguyÃªn ra internet cÃ´ng cá»™ng.\nBáº£o máº­t Ä‘Æ°á»£c tÄƒng cÆ°á»ng á»Ÿ nhiá»u lá»›p:\nAWS WAF báº£o vá»‡ Application Load Balancer (ALB) khá»i cÃ¡c cuá»™c táº¥n cÃ´ng web phá»• biáº¿n.\nAmazon GuardDuty, VPC Flow Logs, vÃ  CloudWatch cung cáº¥p phÃ¡t hiá»‡n má»‘i Ä‘e dá»a liÃªn tá»¥c vÃ  kháº£ nÄƒng quan sÃ¡t.\nSecrets Manager Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u cÆ¡ sá»Ÿ dá»¯ liá»‡u.\nRoute 53 cung cáº¥p quáº£n lÃ½ domain tÃ¹y chá»‰nh vÃ  Ä‘á»‹nh tuyáº¿n DNS.\nDá»± Ã¡n nÃ y thá»ƒ hiá»‡n má»™t cÃ¡ch tiáº¿p cáº­n hiá»‡n Ä‘áº¡i, cloud-native vÃ  phÃ¹ há»£p vá»›i production Ä‘á»ƒ cháº¡y microservices trÃªn AWSâ€”káº¿t há»£p tá»± Ä‘á»™ng hÃ³a, kháº£ nÄƒng quan sÃ¡t, tÃ­nh kháº£ dá»¥ng cao vÃ  cÃ¡c thá»±c hÃ nh báº£o máº­t máº¡nh máº½.\nÄÃ¢y lÃ  kiáº¿n trÃºc cá»§a dá»± Ã¡n:\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.1-vpc-subnets-and-security-groups/","title":"VPC, Subnets, Security Groups","tags":[],"description":"","content":"Kiáº¿n trÃºc bao gá»“m má»™t VPC cÃ³ tÃªn ecs-fargate-microservices-vpc. BÃªn trong VPC nÃ y, 6 subnets vÃ  4 security groups Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ Ä‘áº£m báº£o á»©ng dá»¥ng an toÃ n vÃ  tuÃ¢n theo cÃ¡c best practices\nPublic Subnets (cho Application Load Balancer) CÃ³ hai public subnets, vÃ  chÃºng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ host Application Load Balancer (ALB)\nSecurity Group cho ALB\nInbound rules:\nCho phÃ©p HTTP (port 80)\nCho phÃ©p HTTPS (port 443)\nNhá»¯ng ports nÃ y cho phÃ©p ngÆ°á»i dÃ¹ng truy cáº­p website cá»§a báº¡n\nEgress rules:\nChá»‰ nhá»¯ng ports cáº§n thiáº¿t Ä‘Æ°á»£c cho phÃ©p (trong trÆ°á»ng há»£p nÃ y lÃ  port 3000) dá»±a trÃªn nguyÃªn táº¯c least privilege Äiá»u nÃ y giÃºp giáº£m thiá»ƒu rá»§i ro nhÆ°:\nData exfiltration â€“ containers gá»­i dá»¯ liá»‡u ra ngoÃ i máº¡ng\nMalware communication â€“ káº¿t ná»‘i Ä‘áº¿n cÃ¡c C2 servers Ä‘á»™c háº¡i\nLateral movement â€“ truy cáº­p cÃ¡c dá»‹ch vá»¥ ná»™i bá»™ nÃªn bá»‹ háº¡n cháº¿\nCompliance violations â€“ vi pháº¡m cÃ¡c tiÃªu chuáº©n báº£o máº­t\nPrivate Subnets (cho ECS Tasks) CÃ³ hai private subnets nÆ¡i ECS Fargate tasks cháº¡y\nSecurity Group cho ECS Tasks\nInbound rules:\nChá»‰ cho phÃ©p traffic tá»« public ALB security group trÃªn port 3000 (port á»©ng dá»¥ng cá»§a container) Egress rules:\nCho phÃ©p port 53 (DNS)\nCho phÃ©p port 443 (HTTPS)\nCho phÃ©p port 3000 (App)\nCho phÃ©p port 3306 (MySQL)\nNhá»¯ng port nÃ y cáº§n thiáº¿t Ä‘á»ƒ tasks cÃ³ thá»ƒ pull images, káº¿t ná»‘i Ä‘áº¿n AWS APIs, hoáº·c resolve domain names\nPrivate Subnets (cho RDS Database) CÃ³ hai private subnets bá»• sung dÃ nh riÃªng cho RDS instance\nSecurity Group cho RDS\nInbound rules:\nChá»‰ cho phÃ©p káº¿t ná»‘i tá»« ECS task security group, sá»­ dá»¥ng port 3306 (MySQL port) KhÃ´ng cÃ³ outbound rules: RDS database khÃ´ng cáº§n truy cáº­p internet, vÃ¬ váº­y outbound traffic bá»‹ cháº·n Ä‘á»ƒ báº£o máº­t\nSecurity Group cho VPC Endpoint (ECR Endpoint) Security group nÃ y Ä‘Æ°á»£c gáº¯n vÃ o Interface VPC Endpoint Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi ECS tasks Ä‘á»ƒ pull container images tá»« ECR má»™t cÃ¡ch riÃªng tÆ° (khÃ´ng qua internet)\nInbound rules\nCho phÃ©p HTTPS (443) tá»« ECS Task Security Group\nÄiá»u nÃ y cho phÃ©p ECS tasks truy cáº­p ECR thÃ´ng qua PrivateLink\nOutbound rules\nKhÃ´ng cáº§n outbound (egress) rule\nÄá»ƒ trá»‘ng egress lÃ  an toÃ n vÃ  tuÃ¢n theo strict least privilege best practice\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.2-application-load-balancer/","title":"Application Load Balancer","tags":[],"description":"","content":"Kiáº¿n trÃºc bao gá»“m má»™t Application Load Balancer (ALB) vá»›i listener trÃªn port 80 vÃ  má»™t target group vá»›i hai IP-based targets\nListener (Port 80) Nháº­n cÃ¡c HTTP requests Ä‘áº¿n tá»« ngÆ°á»i dÃ¹ng\nChuyá»ƒn tiáº¿p requests Ä‘áº¿n target group\nTarget Group (IP Targets) Chá»©a hai targets Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh báº±ng Ä‘á»‹a chá»‰ IP\nCung cáº¥p tÃ­nh linh hoáº¡t Ä‘á»ƒ Ä‘Äƒng kÃ½ báº¥t ká»³ endpoint nÃ o cÃ³ thá»ƒ truy cáº­p qua máº¡ng\nLuá»“ng traffic: User â†’ ALB (port 80) â†’ Target Group â†’ Targets (IP)\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.2-prerequiste/","title":"YÃªu cáº§u tiÃªn quyáº¿t","tags":[],"description":"","content":"Thá»±c hiá»‡n cÃ¡c bÆ°á»›c dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ chuáº©n bá»‹ mÃ´i trÆ°á»ng trÆ°á»›c khi triá»ƒn khai háº¡ táº§ng\nClone dá»± Ã¡n tá»« GitHub Má»Ÿ terminal vÃ  clone repository: git clone https://github.com/nguyennt-fpt/ecs-fargate-microserviecs\nBÃªn trong thÆ° má»¥c dá»± Ã¡n, báº¡n sáº½ tÃ¬m tháº¥y hai thÃ nh pháº§n chÃ­nh:\ngetting-started-app/ â€“ mÃ£ nguá»“n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ build Docker container ecs-project/ â€“ Infrastructure as Code (IaC) Ä‘Æ°á»£c xÃ¢y dá»±ng báº±ng Terraform CÃ i Ä‘áº·t cÃ¡c cÃ´ng cá»¥ cáº§n thiáº¿t Äáº£m báº£o cÃ¡c cÃ´ng cá»¥ sau Ä‘Æ°á»£c cÃ i Ä‘áº·t trÃªn mÃ¡y cá»§a báº¡n: Terraform, Git, AWS CLI, Docker Cáº¥u hÃ¬nh AWS CLI vá»›i Access Key BÆ°á»›c 1 â€” Táº¡o Access Key\nÄÄƒng nháº­p vÃ o AWS Console, Ä‘iá»u hÆ°á»›ng Ä‘áº¿n IAM, chá»n Users, chá»n user báº¡n muá»‘n sá»­ dá»¥ng, vÃ o tab Security credentials, click Create access key LÃ m theo hÆ°á»›ng dáº«n sau Ä‘Ã³ copy: Access Key ID, Secret Access Key BÆ°á»›c 2 â€” Cáº¥u hÃ¬nh profile AWS CLI má»›i\nMá»Ÿ terminal vÃ  cháº¡y: aws configure \u0026ndash;profile terraform\nNháº­p Access Key, Secret Access Key, region (vÃ­ dá»¥: ap-southeast-1), vÃ  output format\nBÆ°á»›c 3 â€” Äáº·t profile nÃ y lÃ m máº·c Ä‘á»‹nh\nTrÃªn Windows PowerShell hoáº·c CMD: setx AWS_PROFILE \u0026ldquo;terraform\u0026rdquo;\nÄÃ³ng terminal vÃ  má»Ÿ láº¡i Ä‘á»ƒ biáº¿n mÃ´i trÆ°á»ng cÃ³ hiá»‡u lá»±c Táº¡o ECR repository Báº¡n cáº§n má»™t Amazon ECR repository Ä‘á»ƒ lÆ°u trá»¯ Docker image\nTrong AWS Console, tÃ¬m kiáº¿m ECR, click Create repository\nNháº­p tÃªn repository, click Create Sau khi táº¡o xong, má»Ÿ repository vÃ  click View push commands.\nGiá»¯ cá»­a sá»• nÃ y má»Ÿ â€” báº¡n sáº½ cáº§n nhá»¯ng lá»‡nh Ä‘Ã³ Ä‘á»ƒ push image.\nBuild vÃ  push Docker image Äáº£m báº£o Docker Desktop Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  Ä‘ang cháº¡y\nMá»Ÿ thÆ° má»¥c: getting-started-app/\nMá»Ÿ terminal bÃªn trong thÆ° má»¥c nÃ y\nDÃ¡n vÃ  thá»±c thi cÃ¡c lá»‡nh push Ä‘Ã£ copy tá»« ECR (Nhá»¯ng lá»‡nh nÃ y sáº½ Ä‘Äƒng nháº­p vÃ o ECR, build image, tag nÃ³, vÃ  push nÃ³) Sau khi hoÃ n thÃ nh cÃ¡c lá»‡nh, quay láº¡i ECR console.\nBÃ¢y giá» báº¡n sáº½ tháº¥y má»™t image bÃªn trong repository cá»§a mÃ¬nh. Cáº­p nháº­t cáº¥u hÃ¬nh Terraform Copy repository URI tá»« ECR repository cá»§a báº¡n (VÃ­ dá»¥: 123456789012.dkr.ecr.ap-southeast-1.amazonaws.com/my-app)\nÄi Ä‘áº¿n thÆ° má»¥c: ecs-project/ sau Ä‘Ã³ Ä‘á»•i tÃªn file: terraform.tfvars.example â†’ terraform.tfvars\nTÃ¬m biáº¿n container_image vÃ  dÃ¡n repository URI vá»›i tag latest:\ncontainer_image = \u0026ldquo;123456789012.dkr.ecr.ap-southeast-1.amazonaws.com/my-app:latest\u0026rdquo;\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.3-ecs-cluster/","title":"ECS Cluster","tags":[],"description":"","content":"TrÃªn AWS Console, khi chÃºng ta xem ECS service, chÃºng ta cÃ³ thá»ƒ tháº¥y má»™t cluster Cluster cÃ³ má»™t service, hiá»‡n Ä‘ang cháº¡y\nService nÃ y dá»±a trÃªn má»™t task definition, mÃ  báº¡n cÃ³ thá»ƒ xem trong tab Task Definition\nTask definition chá»‰ Ä‘á»‹nh má»i thá»© cáº§n thiáº¿t Ä‘á»ƒ cháº¡y containers, nhÆ°: tÃ­ch há»£p ALB, sá»‘ lÆ°á»£ng tasks mong muá»‘n, auto scaling, rolling updates, v.v. Trong pháº§n Tasks, báº¡n tháº¥y hai tasks Ä‘ang cháº¡y. ÄÃ¢y lÃ  hai containers cháº¡y web app cho dá»± Ã¡n nÃ y\ná» Ä‘Ã¢y, desired task count Ä‘Æ°á»£c Ä‘áº·t lÃ  2, vÃ¬ váº­y ECS Ä‘áº£m báº£o ráº±ng hai tasks luÃ´n cháº¡y "},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.3-provisioning-infrastructure/","title":"Triá»ƒn khai háº¡ táº§ng","tags":[],"description":"","content":"TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y Ä‘áº£m báº£o Terraform Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t trÃªn mÃ¡y cá»§a báº¡n\nBáº¡n cÃ³ thá»ƒ táº£i xuá»‘ng vÃ  cÃ i Ä‘áº·t tá»« trang web chÃ­nh thá»©c: https://developer.hashicorp.com/terraform\nSau khi cÃ i Ä‘áº·t, xÃ¡c minh báº±ng cÃ¡ch sá»­ dá»¥ng: terraform -v BÃ¢y giá» báº¡n Ä‘Ã£ cÃ³ táº¥t cáº£ cÃ¡c cÃ´ng cá»¥ cáº§n thiáº¿t Ä‘á»ƒ báº¯t Ä‘áº§u cung cáº¥p háº¡ táº§ng\nBÆ°á»›c 1: Má»Ÿ thÆ° má»¥c dá»± Ã¡n\nÄiá»u hÆ°á»›ng Ä‘áº¿n thÆ° má»¥c ecs-project vÃ  má»Ÿ terminal bÃªn trong thÆ° má»¥c nÃ y BÆ°á»›c 2: Cháº¡y cÃ¡c lá»‡nh Terraform\nBáº¡n sáº½ sá»­ dá»¥ng ba lá»‡nh Terraform chÃ­nh. ÄÃ¢y lÃ  nhá»¯ng gÃ¬ má»—i lá»‡nh thá»±c hiá»‡n:\nterraform init Lá»‡nh nÃ y khá»Ÿi táº¡o dá»± Ã¡n NÃ³ táº£i xuá»‘ng cÃ¡c provider cáº§n thiáº¿t (nhÆ° AWS) vÃ  chuáº©n bá»‹ Terraform Ä‘á»ƒ cháº¡y terraform plan Lá»‡nh nÃ y cho báº¡n tháº¥y Terraform sáº½ lÃ m gÃ¬ trÆ°á»›c khi thá»±c hiá»‡n báº¥t ká»³ thay Ä‘á»•i nÃ o NÃ³ táº¡o ra má»™t káº¿ hoáº¡ch thá»±c thi chi tiáº¿t Ä‘á»ƒ báº¡n cÃ³ thá»ƒ xem xÃ©t táº¥t cáº£ cÃ¡c tÃ i nguyÃªn sáº½ Ä‘Æ°á»£c táº¡o, sá»­a Ä‘á»•i hoáº·c xÃ³a terraform apply Lá»‡nh nÃ y thá»±c sá»± xÃ¢y dá»±ng háº¡ táº§ng Terraform sáº½ yÃªu cáº§u báº¡n xÃ¡c nháº­n trÆ°á»›c khi tiáº¿n hÃ nh. Sau khi Ä‘Æ°á»£c phÃª duyá»‡t, nÃ³ báº¯t Ä‘áº§u táº¡o táº¥t cáº£ cÃ¡c tÃ i nguyÃªn Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong cÃ¡c file cáº¥u hÃ¬nh cá»§a báº¡n BÆ°á»›c 3: Chá» triá»ƒn khai\nQuÃ¡ trÃ¬nh cung cáº¥p Ä‘áº§y Ä‘á»§ cÃ³ thá»ƒ máº¥t 15â€“20 phÃºt tÃ¹y thuá»™c vÃ o cÃ¡c tÃ i nguyÃªn Ä‘ang Ä‘Æ°á»£c táº¡o "},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/","title":"TÃ i nguyÃªn","tags":[],"description":"","content":"TÃ i nguyÃªn Ä‘Æ°á»£c táº¡o sau khi cung cáº¥p háº¡ táº§ng báº±ng Terraform Sau khi cháº¡y Terraform Ä‘á»ƒ thiáº¿t láº­p háº¡ táº§ng, cÃ¡c tÃ i nguyÃªn sau sáº½ Ä‘Æ°á»£c táº¡o:\nVPC, Subnets, vÃ  Security Groups CÃ¡c thÃ nh pháº§n máº¡ng cÆ¡ báº£n cung cáº¥p máº¡ng cÃ´ láº­p, Ä‘á»‹nh tuyáº¿n vÃ  quy táº¯c lá»c lÆ°u lÆ°á»£ng\nApplication Load Balancer (ALB) PhÃ¢n phá»‘i lÆ°u lÆ°á»£ng Ä‘áº¿n trÃªn cÃ¡c dá»‹ch vá»¥ ECS Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh kháº£ dá»¥ng cao vÃ  kháº£ nÄƒng má»Ÿ rá»™ng\nECS Cluster MÃ´i trÆ°á»ng Ä‘iá»u phá»‘i container nÆ¡i cÃ¡c dá»‹ch vá»¥ cá»§a báº¡n sáº½ cháº¡y trÃªn AWS Fargate\nAWS WAF TÆ°á»ng lá»­a á»©ng dá»¥ng web giÃºp báº£o vá»‡ á»©ng dá»¥ng khá»i cÃ¡c cuá»™c táº¥n cÃ´ng web phá»• biáº¿n\nVPC Flow Logs vÃ  Amazon GuardDuty CÃ¡c dá»‹ch vá»¥ báº£o máº­t vÃ  giÃ¡m sÃ¡t phÃ¢n tÃ­ch lÆ°u lÆ°á»£ng máº¡ng vÃ  phÃ¡t hiá»‡n hoáº¡t Ä‘á»™ng Ä‘Ã¡ng ngá» hoáº·c Ä‘á»™c háº¡i\nECR VPC Endpoints CÃ¡c endpoint riÃªng tÆ° cho phÃ©p ECS tasks kÃ©o container images tá»« Amazon ECR má»™t cÃ¡ch báº£o máº­t mÃ  khÃ´ng sá»­ dá»¥ng internet cÃ´ng cá»™ng\nRDS vÃ  Secrets Manager Má»™t instance cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ°á»£c quáº£n lÃ½ vÃ  thÃ´ng tin Ä‘Äƒng nháº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ báº£o máº­t Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi á»©ng dá»¥ng cá»§a báº¡n\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.4-waf/","title":"Web Application Firewall","tags":[],"description":"","content":"Kiáº¿n trÃºc bao gá»“m má»™t AWS Web Application Firewall (WAF) vá»›i má»™t sá»‘ managed rules Ä‘á»ƒ báº£o vá»‡ á»©ng dá»¥ng web:\nAWSManagedRulesCommonRuleSet (700 WCU) â€“ báº£o vá»‡ chá»‘ng láº¡i cÃ¡c cuá»™c táº¥n cÃ´ng web phá»• biáº¿n nhÆ° XSS, path traversal, vÃ  cÃ¡c cuá»™c táº¥n cÃ´ng chung khÃ¡c\nAWSManagedRulesSQLiRuleSet (200 WCU) â€“ báº£o vá»‡ cá»¥ thá»ƒ chá»‘ng láº¡i cÃ¡c cuá»™c táº¥n cÃ´ng SQL Injection (SQLi) cá»‘ gáº¯ng thao tÃºng cÃ¡c truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a báº¡n\nRateLimitRule â€“ giá»›i háº¡n sá»‘ lÆ°á»£ng requests tá»« má»™t client trong má»™t khoáº£ng thá»i gian Ä‘á»ƒ ngÄƒn cháº·n láº¡m dá»¥ng, brute-force attacks, hoáº·c cÃ¡c ná»— lá»±c DDoS\nCÃ¹ng nhau, nhá»¯ng rules nÃ y giÃºp á»©ng dá»¥ng lá»c traffic Ä‘á»™c háº¡i, ngÄƒn cháº·n cÃ¡c lá»— há»•ng web phá»• biáº¿n, vÃ  cáº£i thiá»‡n báº£o máº­t cÅ©ng nhÆ° tuÃ¢n thá»§\nLÆ°u Ã½: VÃ¬ ngÃ¢n sÃ¡ch cÃ³ háº¡n, chá»‰ cÃ¡c managed rules cÆ¡ báº£n Ä‘Æ°á»£c Ã¡p dá»¥ng. Náº¿u báº¡n muá»‘n tÄƒng cÆ°á»ng báº£o máº­t, báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c WAF rules bá»• sung Ä‘á»ƒ bao phá»§ cÃ¡c má»‘i Ä‘e dá»a nÃ¢ng cao hÆ¡n\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.5-create-https-protocal/","title":"Táº¡o giao thá»©c HTTPS","tags":[],"description":"","content":"KÃ­ch hoáº¡t HTTPS cho á»¨ng dá»¥ng Web\nÄá»ƒ kÃ­ch hoáº¡t HTTPS, trÆ°á»›c tiÃªn báº¡n cáº§n má»™t hosted zone trong Route 53, Ä‘iá»u nÃ y yÃªu cáº§u má»™t tÃªn miá»n Ä‘Ã£ Ä‘Äƒng kÃ½. Báº¡n cÃ³ thá»ƒ mua domain tá»« báº¥t ká»³ nhÃ  cung cáº¥p domain nÃ o vÃ  trá» nameservers cá»§a nÃ³ Ä‘áº¿n Route 53\nBÆ°á»›c 1: Táº¡o Record trong Route 53\nMá»Ÿ Route 53 vÃ  Ä‘i Ä‘áº¿n hosted zone cá»§a báº¡n\nClick Create record\nÄá»‘i vá»›i Record type, chá»n A â€“ Routes traffic to an IPv4 address and some AWS resources\nTrong Route traffic to, chá»n Alias to Application and Classic Load Balancer\nChá»n ALB hiá»‡n cÃ³ cá»§a báº¡n vÃ  click Create record\nBÃ¢y giá» báº¡n cÃ³ thá»ƒ tháº¥y má»™t record má»›i Ä‘Ã£ Ä‘Æ°á»£c táº¡o BÆ°á»›c 2: ThÃªm HTTPS Listener vÃ o ALB\nÄi Ä‘áº¿n EC2 console â†’ Load Balancing â†’ chá»n ALB cá»§a báº¡n Click Add listener vÃ  chá»n Protocol: HTTPS\nChá»n target group (ecs-fargate-microservices-tg)\nTrong Default SSL/TLS certificate, click Request a new ACM certificate Copy tÃªn domain tá»« record báº¡n Ä‘Ã£ táº¡o trong Route 53 vÃ o trÆ°á»ng domain name cá»§a ACM\nÄá»ƒ cÃ¡c cÃ i Ä‘áº·t khÃ¡c máº·c Ä‘á»‹nh vÃ  click Create\nClick Create record in Route 53 Ä‘á»ƒ xÃ¡c thá»±c certificate Má»™t record má»›i Ä‘Ã£ Ä‘Æ°á»£c táº¡o trong Route 53 Chá» khoáº£ng 2 phÃºt Ä‘á»ƒ certificate Ä‘Æ°á»£c cáº¥p Quay láº¡i trang Add listener, chá»n certificate vá»«a táº¡o vÃ  click Create BÆ°á»›c 3: Chuyá»ƒn hÆ°á»›ng HTTP sang HTTPS\nChá»n listener trÃªn port 80 â†’ Manage listener â†’ Edit listener Chá»n Redirect to URL vÃ  Ä‘áº·t Port: 443, sau Ä‘Ã³ lÆ°u rule BÆ°á»›c 4: Kiá»ƒm tra cáº¥u hÃ¬nh\nTruy cáº­p á»©ng dá»¥ng web cá»§a báº¡n báº±ng HTTPS â†’ nÃ³ sáº½ táº£i thÃ nh cÃ´ng Truy cáº­p báº±ng HTTP â†’ nÃ³ sáº½ tá»± Ä‘á»™ng chuyá»ƒn hÆ°á»›ng sang HTTPS "},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.5-vpc-flow-log-and-guardduty/","title":"VPC Flow Log, GuardDuty","tags":[],"description":"","content":"Kiáº¿n trÃºc cÅ©ng bao gá»“m AWS GuardDuty vÃ  VPC Flow Logs Ä‘á»ƒ tÄƒng cÆ°á»ng giÃ¡m sÃ¡t báº£o máº­t\nAWS GuardDuty lÃ  má»™t dá»‹ch vá»¥ phÃ¡t hiá»‡n má»‘i Ä‘e dá»a liÃªn tá»¥c giÃ¡m sÃ¡t cÃ¡c tÃ i khoáº£n AWS vÃ  workloads cá»§a báº¡n Ä‘á»ƒ tÃ¬m hoáº¡t Ä‘á»™ng Ä‘á»™c háº¡i hoáº·c khÃ´ng Ä‘Æ°á»£c á»§y quyá»n. NÃ³ phÃ¢n tÃ­ch dá»¯ liá»‡u tá»« cÃ¡c nguá»“n nhÆ° VPC Flow Logs, CloudTrail events, vÃ  DNS logs Ä‘á»ƒ phÃ¡t hiá»‡n cÃ¡c má»‘i Ä‘e dá»a nhÆ° instances bá»‹ xÃ¢m pháº¡m, hoáº¡t Ä‘á»™ng trinh sÃ¡t, hoáº·c cÃ¡c API calls báº¥t thÆ°á»ng\nVPC Flow Logs ghi láº¡i thÃ´ng tin vá» IP traffic Ä‘i Ä‘áº¿n vÃ  Ä‘i tá»« cÃ¡c network interfaces trong VPC cá»§a báº¡n. Äiá»u nÃ y cho phÃ©p báº¡n giÃ¡m sÃ¡t hoáº¡t Ä‘á»™ng máº¡ng, kháº¯c phá»¥c sá»± cá»‘ káº¿t ná»‘i, vÃ  há»— trá»£ phÃ¢n tÃ­ch báº£o máº­t báº±ng cÃ¡ch cung cáº¥p kháº£ nÄƒng hiá»ƒn thá»‹ traffic chi tiáº¿t\nCÃ¹ng nhau, GuardDuty vÃ  VPC Flow Logs giÃºp dá»± Ã¡n phÃ¡t hiá»‡n, Ä‘iá»u tra vÃ  pháº£n á»©ng vá»›i cÃ¡c má»‘i Ä‘e dá»a báº£o máº­t tiá»m áº©n, cáº£i thiá»‡n báº£o máº­t cloud tá»•ng thá»ƒ\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.6-ecr-endpoints/","title":"ECR Endpoint","tags":[],"description":"","content":"Dá»± Ã¡n sá»­ dá»¥ng VPC Endpoint cho Amazon ECR thay vÃ¬ NAT gateway Ä‘á»ƒ pull container images cho ECS tasks\nVPC Endpoint lÃ  má»™t káº¿t ná»‘i riÃªng tÆ° giá»¯a VPC cá»§a báº¡n vÃ  cÃ¡c dá»‹ch vá»¥ AWS, cho phÃ©p cÃ¡c tÃ i nguyÃªn trong private subnets truy cáº­p ECR mÃ  khÃ´ng cáº§n Ä‘i qua internet cÃ´ng cá»™ng\nCÃ¡ch tiáº¿p cáº­n nÃ y tÄƒng cÆ°á»ng báº£o máº­t vÃ¬ traffic váº«n náº±m trong máº¡ng AWS, giáº£m thiá»ƒu viá»‡c phÆ¡i bÃ y vá»›i cÃ¡c má»‘i Ä‘e dá»a bÃªn ngoÃ i tiá»m áº©n nhÆ° nghe lÃ©n hoáº·c táº¥n cÃ´ng\nNÃ³ cÅ©ng Ä‘Æ¡n giáº£n hÃ³a cáº¥u hÃ¬nh máº¡ng vÃ¬ báº¡n khÃ´ng cáº§n thiáº¿t láº­p NAT gateway hoáº·c quáº£n lÃ½ public IP addresses cho ECS tasks cá»§a mÃ¬nh\nNgoÃ i ra, sá»­ dá»¥ng VPC Endpoint cÃ³ thá»ƒ giÃºp giáº£m chi phÃ­ truyá»n dá»¯ liá»‡u, vÃ¬ traffic trong máº¡ng AWS thÆ°á»ng ráº» hÆ¡n so vá»›i gá»­i qua NAT gateway ra internet\nNhÃ¬n chung, thiáº¿t láº­p nÃ y Ä‘áº£m báº£o ráº±ng containers cá»§a báº¡n cÃ³ thá»ƒ pull images tá»« ECR má»™t cÃ¡ch an toÃ n vÃ  hiá»‡u quáº£ trong khi váº«n giá»¯ chÃºng cÃ´ láº­p trong private subnets\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.6-test-auto-scaling/","title":"Kiá»ƒm tra Auto Scaling","tags":[],"description":"","content":"Kiá»ƒm tra Auto Scaling cá»§a ECS Service\nTiáº¿p theo, chÃºng ta sáº½ cáº­p nháº­t ECS service Ä‘á»ƒ xÃ¡c minh ráº±ng auto scaling Ä‘ang hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c\nTrong kiáº¿n trÃºc nÃ y, ECS Service Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh vá»›i Auto Scaling báº±ng Terraform.\nTuy nhiÃªn, Ä‘á»ƒ viá»‡c kiá»ƒm tra thuáº­n tiá»‡n hÆ¡n, tÃ´i sáº½ thÃªm má»™t policy thá»© ba Policy bá»• sung nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ kÃ­ch hoáº¡t cÃ¡c hÃ nh Ä‘á»™ng scaling máº¡nh máº½ hÆ¡n hoáº·c trong cÃ¡c Ä‘iá»u kiá»‡n khÃ¡c nhau, giÃºp dá»… dÃ ng quan sÃ¡t vÃ  xÃ¡c thá»±c hÃ nh vi Auto Scaling trong quÃ¡ trÃ¬nh load test hoáº·c demo\nÄi Ä‘áº¿n ECS â†’ ecs-fargate-microservices-cluster â†’ chá»n Update service\nTrong pháº§n Service Auto Scaling, click Add more scaling policy\nTáº¡o má»™t scaling policy má»›i vá»›i cÃ¡c cÃ i Ä‘áº·t sau:\nMetric: ALBRequestCountPerTarget\nTarget value: 50\nScale-out cooldown: 60 seconds\nScale-in cooldown: 300 seconds\nNhá»¯ng giÃ¡ trá»‹ nÃ y giÃºp dá»… dÃ ng kÃ­ch hoáº¡t cÃ¡c sá»± kiá»‡n scaling cho má»¥c Ä‘Ã­ch kiá»ƒm tra\nÄá»ƒ táº¡o traffic, sá»­ dá»¥ng cÃ´ng cá»¥ load-testing nhÆ° Apache Bench (ab) Cháº¡y lá»‡nh: ab -n 10000 -c 20 your-domain-name\n-n 10000: tá»•ng sá»‘ requests\n-c 20: sá»‘ requests Ä‘á»“ng thá»i\nSau má»™t thá»i gian ngáº¯n, CloudWatch sáº½ phÃ¡t hiá»‡n táº£i tÄƒng vÃ  kÃ­ch hoáº¡t alarm\nKhi scaling policy Ä‘Æ°á»£c kÃ­ch hoáº¡t, sá»‘ lÆ°á»£ng tasks Ä‘ang cháº¡y sáº½ tá»± Ä‘á»™ng tÄƒng\nTrong bÃ i test nÃ y, service Ä‘Ã£ scale tá»« 2 tasks lÃªn 4 tasks\nÄiá»u nÃ y xÃ¡c nháº­n ráº±ng cáº¥u hÃ¬nh auto scaling Ä‘ang hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.7-test-waf-guardduty/","title":"Kiá»ƒm tra WAF vÃ  GuardDuty","tags":[],"description":"","content":"Kiá»ƒm tra báº£o vá»‡ cá»§a AWS WAF\nTiáº¿p theo, tÃ´i Ä‘Ã£ thá»±c hiá»‡n má»™t vÃ i lá»‡nh Ä‘Æ¡n giáº£n Ä‘á»ƒ xÃ¡c minh liá»‡u AWS WAF cÃ³ hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c vÃ  cháº·n cÃ¡c máº«u táº¥n cÃ´ng phá»• biáº¿n hay khÃ´ng\nTÃ´i Ä‘Ã£ gá»­i má»™t sá»‘ requests Ä‘á»™c háº¡i mÃ´ phá»ng (nhÆ° SQL Injection vÃ  XSS payloads)\nPháº£n há»“i tráº£ vá» lÃ  403 Forbidden, Ä‘iá»u nÃ y xÃ¡c nháº­n ráº±ng WAF Ä‘Ã£ cháº·n thÃ nh cÃ´ng cÃ¡c requests\nSau Ä‘Ã³ tÃ´i kiá»ƒm tra dashboard WAF trong AWS Management Console\nSau má»™t vÃ i láº§n thá»­ nghiá»‡m, sá»‘ lÆ°á»£ng requests bá»‹ cháº·n Ä‘Ã£ tÄƒng lÃªn 13, cho tháº¥y WAF Ä‘ang hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch vÃ  thá»±c thi cÃ¡c rules Ä‘Ã£ cáº¥u hÃ¬nh nhÆ° mong Ä‘á»£i\nğŸ” Kiá»ƒm tra Amazon GuardDuty\nSau khi xÃ¡c minh WAF, tÃ´i tiáº¿n hÃ nh kiá»ƒm tra Amazon GuardDuty\nVÃ¬ khÃ´ng cÃ³ cuá»™c táº¥n cÃ´ng thá»±c sá»± nÃ o xáº£y ra, tÃ´i Ä‘Ã£ sá»­ dá»¥ng tÃ­nh nÄƒng tÃ­ch há»£p sáºµn cá»§a AWS \u0026ldquo;Generate Sample Findings\u0026rdquo; Ä‘á»ƒ mÃ´ phá»ng cÃ¡c phÃ¡t hiá»‡n báº£o máº­t\nNgay sau khi táº¡o sample findings, GuardDuty hiá»ƒn thá»‹:\nTá»•ng sá»‘ findings: 374\nTÃ i nguyÃªn cÃ³ findings: 16\nTÃ i khoáº£n cÃ³ findings: 1\nNhá»¯ng káº¿t quáº£ nÃ y xÃ¡c nháº­n ráº±ng GuardDuty Ä‘ang hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c. NÃ³ cÃ³ thá»ƒ phÃ¡t hiá»‡n má»‘i Ä‘e dá»a, táº¡o findings vÃ  hiá»ƒn thá»‹ thÃ´ng tin báº£o máº­t chi tiáº¿t trong thá»i gian thá»±c.\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.4-resources/1.4.7-rds-and-secret-manager/","title":"RDS, Secret Manager","tags":[],"description":"","content":"Khi báº¡n tÃ¬m kiáº¿m RDS trong AWS Management Console, báº¡n cÃ³ thá»ƒ tháº¥y ráº±ng má»™t RDS instance Ä‘Ã£ Ä‘Æ°á»£c táº¡o\nÄá»ƒ tÄƒng cÆ°á»ng báº£o máº­t, dá»± Ã¡n sá»­ dá»¥ng AWS Secrets Manager Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin Ä‘Äƒng nháº­p RDS\nBáº±ng cÃ¡ch sá»­ dá»¥ng Terraform, RDS instance vÃ  thÃ´ng tin Ä‘Äƒng nháº­p cá»§a nÃ³ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a dÆ°á»›i dáº¡ng code, cÃ³ nghÄ©a lÃ  thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c hardcode á»Ÿ báº¥t ká»³ Ä‘Ã¢u trong á»©ng dá»¥ng hoáº·c task definitions\nTerraform cung cáº¥p RDS instance, Secrets Manager secret, vÃ  liÃªn káº¿t chÃºng tá»± Ä‘á»™ng vá»›i ECS tasks hoáº·c cÃ¡c á»©ng dá»¥ng khÃ¡c\nSecrets Manager cÃ³ thá»ƒ tá»± Ä‘á»™ng xoay vÃ²ng thÃ´ng tin Ä‘Äƒng nháº­p, giáº£m rá»§i ro máº­t kháº©u bá»‹ xÃ¢m pháº¡m\nECS tasks cÃ³ thá»ƒ truy xuáº¥t thÃ´ng tin Ä‘Äƒng nháº­p má»™t cÃ¡ch an toÃ n táº¡i runtime mÃ  khÃ´ng phÆ¡i bÃ y chÃºng\nCÃ¡ch tiáº¿p cáº­n nÃ y Ä‘áº£m báº£o ráº±ng thÃ´ng tin Ä‘Äƒng nháº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a báº¡n Ä‘Æ°á»£c báº£o vá»‡, quáº£n lÃ½ vÃ  truy cáº­p an toÃ n, Ä‘á»“ng thá»i giá»¯ cho háº¡ táº§ng hoÃ n toÃ n tá»± Ä‘á»™ng vÃ  cÃ³ thá»ƒ tÃ¡i táº¡o\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/1-ecs-fargate-microservices/1.8-cicd/","title":"CI/CD","tags":[],"description":"","content":"Triá»ƒn khai CI/CD cho Build, Deploy vÃ  Rolling Update tá»± Ä‘á»™ng\nBÃ¢y giá» tÃ´i sáº½ triá»ƒn khai quy trÃ¬nh CI/CD Ä‘á»ƒ báº¥t cá»© khi nÃ o developer push phiÃªn báº£n má»›i cá»§a á»©ng dá»¥ng lÃªn GitHub, code sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng build, Docker image sáº½ Ä‘Æ°á»£c push lÃªn ECR, vÃ  ECS service sáº½ thá»±c hiá»‡n rolling update vá»›i zero downtime\nTáº¡o CodeBuild Project Äi Ä‘áº¿n AWS CodeBuild vÃ  táº¡o project má»›i\nSource provider: Chá»n GitHub\nNáº¿u Ä‘Ã¢y lÃ  láº§n Ä‘áº§u káº¿t ná»‘i vá»›i GitHub, hÃ£y authorize káº¿t ná»‘i\nChá»n repository chá»©a source code cá»§a á»©ng dá»¥ng (Trong trÆ°á»ng há»£p nÃ y lÃ  getting-started-app)\nÄá»‘i vá»›i tÃ¹y chá»n webhook, chá»n: \u0026ldquo;Manually create a webhook for this repository in the GitHub console\u0026rdquo;\nTrong pháº§n Buildspec, chá»n \u0026ldquo;Use a buildspec file\u0026rdquo;\nÄá»ƒ trá»‘ng filename vÃ¬ trong thÆ° má»¥c getting-started-app Ä‘Ã£ cÃ³ sáºµn file tÃªn buildspec.yml CodeBuild sáº½ tá»± Ä‘á»™ng phÃ¡t hiá»‡n file nÃ y (Náº¿u báº¡n sá»­ dá»¥ng tÃªn file khÃ¡c, hÃ£y nháº­p tÃªn á»Ÿ Ä‘Ã¢y)\nCopy webhook URL Ä‘Æ°á»£c cung cáº¥p bá»Ÿi CodeBuild\nThÃªm webhook trong GitHub, Ä‘i Ä‘áº¿n GitHub repository cá»§a báº¡n â†’ Settings â†’ Webhooks, click Add webhook\nDÃ¡n webhook URL Ä‘Ã£ copy tá»« CodeBuild, lÆ°u webhook\nÄáº£m báº£o quyá»n IAM cho CodeBuild Äáº£m báº£o ráº±ng service role cá»§a CodeBuild cÃ³ cÃ¡c quyá»n cáº§n thiáº¿t Ä‘á»ƒ cÃ³ thá»ƒ:\nPull dependencies\nBuild Docker images\nPush images lÃªn Amazon ECR\nTÆ°Æ¡ng tÃ¡c vá»›i CloudWatch Logs\nTÆ°Æ¡ng tÃ¡c vá»›i S3 (náº¿u artifacts Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ Ä‘Ã³)\nKhÃ´ng cÃ³ nhá»¯ng quyá»n nÃ y, quÃ¡ trÃ¬nh build sáº½ tháº¥t báº¡i\nTáº¡o CodePipeline Äi Ä‘áº¿n AWS CodePipeline vÃ  táº¡o pipeline má»›i\nChá»n \u0026ldquo;Build a custom pipeline\u0026rdquo;\nÄá»‘i vá»›i Source stage:\nChá»n GitHub\nChá»n repository\nÄáº·t Webhook event type = Push\nÄá»‘i vá»›i Build stage:\nChá»n AWS CodeBuild\nChá»n CodeBuild project Ä‘Ã£ táº¡o trÆ°á»›c Ä‘Ã³\nÄá»‘i vá»›i Deploy stage:\nInput artifact: chá»n BuildArtifact\nDeploy provider: Amazon ECS\nChá»n ECS cluster vÃ  service Ä‘Ã£ Ä‘Æ°á»£c táº¡o trÆ°á»›c Ä‘Ã³\nClick Create Ä‘á»ƒ khá»Ÿi táº¡o pipeline\nÄáº£m báº£o role cá»§a CodePipeline cÃ³ quyá»n thá»±c hiá»‡n cÃ´ng viá»‡c\nKiá»ƒm tra CI/CD Pipeline BÃ¢y giá» thá»±c hiá»‡n má»™t thay Ä‘á»•i nhá» trong source code vÃ  push lÃªn GitHub\nKhi push hoÃ n táº¥t:\nCodePipeline sáº½ tá»± Ä‘á»™ng báº¯t Ä‘áº§u cháº¡y\nBuild stage sáº½ build Docker image vÃ  push lÃªn ECR\nDeploy stage sáº½ cáº­p nháº­t ECS service\nQuan sÃ¡t Rolling Update\nSau má»™t thá»i gian ngáº¯n, trong ECS service:\nSá»‘ lÆ°á»£ng running tasks tÄƒng lÃªn 4 (2 tasks cÅ© + 2 tasks má»›i Ä‘Æ°á»£c táº¡o cho rolling update)\nSau khi cÃ¡c tasks má»›i pass health checks, ECS sáº½ terminate 2 tasks cÅ©\nÄiá»u nÃ y xÃ¡c nháº­n ráº±ng rolling update Ä‘Ã£ hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c\nCuá»‘i cÃ¹ng, truy cáº­p website láº¡i\ná»¨ng dá»¥ng bÃ¢y giá» hiá»ƒn thá»‹ phiÃªn báº£n Ä‘Ã£ cáº­p nháº­t, cÃ³ nghÄ©a lÃ  CI/CD pipeline Ä‘ang hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i\nÄiá»u hÆ°á»›ng Ä‘áº¿n ECR, cÃ³ má»™t image má»›i Ä‘Ã£ Ä‘Æ°á»£c push vÃ o repository\n"},{"uri":"https://thienluhoan.github.io/workshop-template/vi/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"https://thienluhoan.github.io/workshop-template/vi/tags/","title":"Tags","tags":[],"description":"","content":""}]